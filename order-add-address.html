<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shipping Details</title>
  <link rel="shortcut icon" type="image/png" href="./src/assets/images/logos/favicon.png" />
  <link rel="stylesheet" href="./src/assets/css/styles.min.css" />
</head>
<style>
  #myInput {
    background-image: url("/css/searchicon.png");
    background-position: 10px 10px;
    background-repeat: no-repeat;
    width: 50%;
    float: right;
    font-size: 16px;
    padding: 12px 20px 12px 40px;
    border: 1px solid #ddd;
    margin-bottom: 20px;
    margin-top: 20px;
  }
</style>
<style>
  /* Style the select elements */
  .custom-select {
    position: relative;
    width: 100%;
  }

  /* Hide the default arrow and create a custom dropdown arrow */
  .custom-select select {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    background: transparent;
    padding-right: 1em;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
    background-repeat: no-repeat;
    background-position: right 0.7em top 50%;
    background-size: 1.5em auto;
    border: 1px solid #ced4da;
    border-radius: 4px;
    font-size: 12px;
    line-height: 2;
    padding: 0.375rem 1.75rem 0.375rem 0.75rem;
    -webkit-transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
  }
</style>

<body>
  <!--  Body Wrapper -->
  <div class="page-wrapper" id="main-wrapper" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full"
    data-sidebar-position="fixed" data-header-position="fixed">
    <!-- Sidebar Start -->
    <aside class="left-sidebar">
      <!-- Sidebar scroll-->
      <div>
        <div class="brand-logo d-flex align-items-center justify-content-between">
          <a href="./products.html" class="text-nowrap logo-img">
            <img src="./src/assets/images/logos/favicon.png" width="180" alt="" />
          </a>
          <div class="close-btn d-xl-none d-block sidebartoggler cursor-pointer" id="sidebarCollapse">
            <i class="ti ti-x fs-8"></i>
          </div>
        </div>
        <!-- Sidebar navigation-->
        <nav class="sidebar-nav scroll-sidebar" data-simplebar="">
          <ul id="sidebarnav">
            <li class="nav-small-cap">
              <i class="ti ti-dots nav-small-cap-icon fs-4"></i>
              <span class="hide-menu">Home</span>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./products.html" aria-expanded="false">
                <span>
                  <i class="ti ti-layout-dashboard"></i>
                </span>
                <span class="hide-menu">Products</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./cart.html" aria-expanded="false">
                <span>
                  <i class="ti ti-layout-dashboard"></i>
                </span>
                <span class="hide-menu">Cart</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./favourites.html" aria-expanded="false">
                <span>
                  <i class="ti ti-layout-dashboard"></i>
                </span>
                <span class="hide-menu">Favourites</span>
              </a>
            </li>
            <li class="nav-small-cap">
              <i class="ti ti-dots nav-small-cap-icon fs-4"></i>
              <span class="hide-menu">Menu</span>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./profile.html" aria-expanded="false">
                <span>
                  <i class="ti ti-article"></i>
                </span>
                <span class="hide-menu">Profile</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./orders.html" aria-expanded="false">
                <span>
                  <i class="ti ti-alert-circle"></i>
                </span>
                <span class="hide-menu">Orders</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./feedback.html" aria-expanded="false">
                <span>
                  <i class="ti ti-cards"></i>
                </span>
                <span class="hide-menu">Feedback</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./ratings.html" aria-expanded="false">
                <span>
                  <i class="ti ti-file-description"></i>
                </span>
                <span class="hide-menu">Ratings</span>
              </a>
            </li>

            <li class="nav-small-cap">
              <i class="ti ti-dots nav-small-cap-icon fs-4"></i>
              <span class="hide-menu">Settings</span>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./support.html" aria-expanded="false">
                <span>
                  <i class="ti ti-menu"></i>
                </span>
                <span class="hide-menu">Support</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="./login.html" aria-expanded="false"
                style="margin-bottom: 10vh; color: rgba(255, 0, 0, 0.5);">
                <span>
                  <i class="ti ti-login"></i>
                </span>
                <span class="hide-menu">Logout</span>
              </a>
            </li>
          </ul>
        </nav>
        <!-- End Sidebar navigation -->
      </div>
      <!-- End Sidebar scroll-->
    </aside>
    <!--  Sidebar End -->
    <!--  Main wrapper -->
    <div class="body-wrapper">
      <!--  Header Start -->

      <!--  Header End -->
      <div>
        <div class="row">
          <div class="card">
            <div class="card-body">
              <h2 style="width: 100%;text-align: center;"> Add Shipping Address</h2>
              <div class="card">
                <div class="card-body">
                  <form>
                    <h5>Name</h5>
                    <input class="form-control" id="name" readonly />
                    <h5 style="margin-top: 10px;">Mobile Number</h5>
                    <input class="form-control" id="mobile" readonly />
                    <h5 style="margin-top: 10px;">E-mail ID</h5>
                    <input class="form-control" id="email" readonly />
                    <h5 style="margin-top: 10px;">Landmark</h5>
                    <input class="form-control" id="landmark" type="text" />
                    <h5 style="margin-top: 10px;">Address</h5>
                    <textarea class="form-control" id="address" type="address" style="min-height: 100px;"></textarea>
                    <h5 style="margin-top: 10px;">Country</h5>
                    <div class="custom-select">
                      <select class="form-control" id="country">
                        <option value="0">Select</option>
                        <option value="1">India</option>
                      </select>
                    </div>

                    <h5 style="margin-top: 10px;">State</h5>
                    <div class="custom-select">
                      <select class="form-control" id="state">
                        <option value="0">Select</option>
                        <option value="1">Tamilnadu</option>
                      </select>
                    </div>
                    <h5 style="margin-top: 10px;">City</h5>
                    <input class="form-control" id="city" />
                    <h5 style="margin-top: 10px;">Pincode</h5>
                    <input class="form-control" id="pincode" maxlength="6"
                      oninput="this.value=(this.value.match('[0-9]+'))" />

                    <button type="button" class="btn btn-warning"
                      style="margin-top: 20px; margin-left: 10px; float: right;" onclick="Save()">
                      Submit
                    </button>
                </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
  <script src="./src/assets/libs/jquery/dist/jquery.min.js"></script>
  <script src="./src/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script src="./src/assets/js/sidebarmenu.js"></script>
  <script src="./src/assets/js/app.min.js"></script>
  <script src="./src/assets/libs/apexcharts/dist/apexcharts.min.js"></script>
  <script src="./src/assets/libs/simplebar/dist/simplebar.js"></script>
  <script src="./src/assets/js/dashboard.js"></script>

  <script>
    let userName = document.getElementById("name")
    let mobile = document.getElementById("mobile")
    let email = document.getElementById("email")
    let landmark = document.getElementById("landmark")
    let address = document.getElementById("address")
    let country = document.getElementById("country")
    let state = document.getElementById("state")
    let city = document.getElementById("city")
    let pincode = document.getElementById("pincode")

    userName.value = window.localStorage.getItem('u_name')
    mobile.value = window.localStorage.getItem('mobile')
    email.value = window.localStorage.getItem('email')

    const Save = () => {

      if (landmark.value == "" || address.value == "" || country.value == '0' || state.value == '0' || city.value == "" || pincode.value == "")
      {
        alert('Please fill all details to continue');
        return false;
      }


      let url = "src/api/update-address.php"
      let body = JSON.stringify({
        token: window.localStorage.getItem("authToken"),
        address: userName.value.trim() + " , " +
          landmark.value.trim() + " , " + address.value.trim() + " , " + country.options[country.value].text + " , " + state.options[state.value].text + " , " + city.value.trim() + " , " + pincode.value.trim()
      })

      fetch(url,{
        body: body,
        method: "POST"
      })
        .then(res => res.json())
        .then(data => {
          alert(data.msg)
          if (data.success) {
            window.localStorage.setItem("shippingAddress", JSON.parse(body).address)
            window.location.href = "./checkout.html"
          }
        })
    }
  </script>
</body>

</html>