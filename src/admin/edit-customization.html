<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Edit Customization</title>
    <link rel="shortcut icon" type="image/png" href="../assets/images/logos/favicon.png" />
    <link rel="stylesheet" href="../assets/css/styles.min.css" />

    <style>
        /* Style the select elements */
        .custom-select {
            position: relative;
            width: 100%;
        }

        /* Hide the default arrow and create a custom dropdown arrow */
        .custom-select select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background: transparent;
            padding-right: 1em;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
            background-repeat: no-repeat;
            background-position: right 0.7em top 50%;
            background-size: 1.5em auto;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 12px;
            line-height: 2;
            padding: 0.375rem 1.75rem 0.375rem 0.75rem;
            -webkit-transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
    </style>

    <style>
        .customizations-content {
            display: flex;
            flex-wrap: wrap;
            /* Allow items to wrap onto multiple lines */
            justify-content: space-between;
            /* Distribute items evenly along the main axis */
            align-items: flex-start;
            /* Align items at the start of the cross axis */
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.6s ease;
        }

        .customizations-content>div {
            width: calc(32% - 10px);
            /* Set width for each item with margin */
            margin: 5px;
            /* Add margin for spacing between items */
        }

        .customizations {
            margin-top: 20px;
            margin-bottom: 30px;
            border-bottom: 1px solid #E1E8EE;
            width: 90%;
            margin-left: 5%;

            border: 1px solid #ccc;
            /* Add border to create the box effect */
            padding: 7px;
            /* Add padding for spacing */
            margin-bottom: 5px;
            /* Add margin for spacing between boxes */

        }

        .customization-header {
            cursor: pointer;
            /* Set cursor to pointer to indicate clickable */
            display: flex;
            /* Use flexbox for layout */
            justify-content: space-between;
            /* Align items to each end */
            align-items: center;
            /* Align items vertically */
        }

        .expand-btn {
            font-size: 24px;
            /* Adjust the font size as needed */
            font-weight: bold;
            /* Make the symbol bold */
        }
    </style>

</head>

<body>
    <!--  Body Wrapper -->
    <div class="page-wrapper" id="main-wrapper" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full"
        data-sidebar-position="fixed" data-header-position="fixed">
        <!-- Sidebar Start -->
        <aside class="left-sidebar">
            <!-- Sidebar scroll-->
            <div>
                <div class="brand-logo d-flex align-items-center justify-content-between">
                    <a href="./products.html" class="text-nowrap logo-img">
                        <img src="../assets/images/logos/favicon.png" width="180" alt="" />
                    </a>
                    <div class="close-btn d-xl-none d-block sidebartoggler cursor-pointer" id="sidebarCollapse">
                        <i class="ti ti-x fs-8"></i>
                    </div>
                </div>
                <!-- Sidebar navigation-->
                <nav class="sidebar-nav scroll-sidebar" data-simplebar="">
                    <ul id="sidebarnav">
                        <li class="nav-small-cap">
                            <i class="ti ti-dots nav-small-cap-icon fs-4"></i>
                            <span class="hide-menu">Home</span>
                        </li>
                        <li class="sidebar-item">
                            <a class="sidebar-link" href="./products.html" aria-expanded="false">
                                <span>
                                    <i class="ti ti-layout-dashboard"></i>
                                </span>
                                <span class="hide-menu">Products</span>
                            </a>
                        </li>
                        <li class="nav-small-cap">
                            <i class="ti ti-dots nav-small-cap-icon fs-4"></i>
                            <span class="hide-menu">Menu</span>
                        </li>
                        <li class="sidebar-item">
                            <a class="sidebar-link" href="./profile.html" aria-expanded="false">
                                <span>
                                    <i class="ti ti-article"></i>
                                </span>
                                <span class="hide-menu">Profile</span>
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a class="sidebar-link" href="./orders.html" aria-expanded="false">
                                <span>
                                    <i class="ti ti-alert-circle"></i>
                                </span>
                                <span class="hide-menu">Orders</span>
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a class="sidebar-link" href="./feedback.html" aria-expanded="false">
                                <span>
                                    <i class="ti ti-cards"></i>
                                </span>
                                <span class="hide-menu">Feedback</span>
                            </a>
                        </li>
                        <li class="sidebar-item">
                            <a class="sidebar-link" href="./ratings.html" aria-expanded="false">
                                <span>
                                    <i class="ti ti-file-description"></i>
                                </span>
                                <span class="hide-menu">Ratings</span>
                            </a>
                        </li>

                        <li class="nav-small-cap">
                            <i class="ti ti-dots nav-small-cap-icon fs-4"></i>
                            <span class="hide-menu">Settings</span>
                        </li>
                        <li class="sidebar-item">

                            <a class="sidebar-link" href="./change-logo.html" aria-expanded="false">
                                <span>
                                    <i class="ti ti-settings"></i>
                                </span>
                                <span class="hide-menu">Settings</span>
                            </a>

                            <a class="sidebar-link" href="./add-offer.html" aria-expanded="false">
                                <span>
                                    <i class="ti ti-file-description"></i>
                                </span>
                                <span class="hide-menu">Offers</span>
                            </a>

                            <a class="sidebar-link" href="./login.html" aria-expanded="false">
                                <span>
                                    <i class="ti ti-login"></i>
                                </span>
                                <span class="hide-menu">Logout</span>
                            </a>
                        </li>
                    </ul>
                </nav>
                <!-- End Sidebar navigation -->
            </div>
            <!-- End Sidebar scroll-->
        </aside>
        <!--  Sidebar End -->
        <!--  Main wrapper -->
        <div class="body-wrapper">
            <div>
                <div class="card">
                    <div class="card-body">
                        <h2 style="width: 100%; text-align: center;">Edit Customization</h2>
                        <div class="card">
                            <div class="card-body">

                                <!--Form Starting Here-->
                                <form>
                                    <div class="row">

                                        <div class="col-sm-8">
                                            <div class="row">
                                                <div class="col-sm-3">
                                                    <h6>Watch Name</h6>
                                                    <input class="form-control" id="watchname" readonly
                                                        placeholder="Galaxy Watch 6" />
                                                </div>
                                                <div class="col-sm-3">
                                                    <h6>Watch Model</h6>
                                                    <input class="form-control" id="watchmodel"
                                                        onchange="calculateTotalCost()" maxlength="15"
                                                        onkeypress="return isNumberKey(this, event);"
                                                        placeholder="SAMSUNG" readonly />
                                                </div>
                                                <div class="col-sm-3">
                                                    <h6>Watch Base Price</h6>
                                                    <input class="form-control" id="watchprice" maxlength="30"
                                                        placeholder="9999" readonly />

                                                </div>

                                                <div class="col-sm-3">
                                                    <h6>Service (%)</h6>
                                                    <input class="form-control" id="servicePercentage" maxlength="30"
                                                        placeholder="9999" readonly />
                                                </div>

                                                <p style="margin: 10px;"> * price may vary after customization respect
                                                    to service percentage</p>

                                                <div class="container">
                                                    <div class="row" style="margin-top: 2%;">
                                                        <div class="col-sm-12">
                                                            <div class="row">
                                                                <h5>Select Options</h5>
                                                                <div class="col-4" style="margin-top: 10px;">
                                                                    <div class="custom-select">
                                                                        <select class="form-control" id="dial_dropdown">
                                                                            <option value="0">Dials</option>
                                                                            <!-- Add more options as needed -->
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <div class="col-4" style="margin-top: 10px;">
                                                                    <div class="custom-select">
                                                                        <select class="form-control"
                                                                            id="strap_dropdown">
                                                                            <option value="0">Straps</option>
                                                                            <!-- Add more options as needed -->
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <div class="col-4" style="margin-top: 10px;">
                                                                    <div class="custom-select">
                                                                        <select class="form-control"
                                                                            id="bezel_dropdown">
                                                                            <option value="0">Bezel</option>
                                                                            <!-- Add more options as needed -->
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-12">
                                                            <div class="row">
                                                                <div class="col-4" style="margin-top: 20px;">
                                                                    <div class="custom-select">
                                                                        <select class="form-control"
                                                                            id="caseback_dropdown">
                                                                            <option value="0">Caseback</option>
                                                                            <!-- Add more options as needed -->
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <div class="col-4" style="margin-top: 20px;">
                                                                    <div class="custom-select">
                                                                        <select class="form-control"
                                                                            id="chronocase_dropdown">
                                                                            <option value="0">Chronocase</option>
                                                                            <!-- Add more options as needed -->
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <div class="col-4" style="margin-top: 20px;">
                                                                    <div class="custom-select">
                                                                        <select class="form-control"
                                                                            id="crown_dropdown">
                                                                            <option value="0">Crown</option>
                                                                            <!-- Add more options as needed -->
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-12">
                                                            <div class="row">
                                                                <div class="col-4" style="margin-top: 20px;">
                                                                    <div class="custom-select">
                                                                        <select class="form-control" id="hand_dropdown">
                                                                            <option value="0">Hands</option>
                                                                            <!-- Add more options as needed -->
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <div class="col-4" style="margin-top: 20px;">
                                                                    <div class="custom-select">
                                                                        <select class="form-control"
                                                                            id="movement_dropdown">
                                                                            <option value="0">Movement</option>
                                                                            <!-- Add more options as needed -->
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <div class="col-4" style="margin-top: 20px;">
                                                                    <div class="custom-select">
                                                                        <select class="form-control"
                                                                            id="second_dropdown">
                                                                            <option value="0">Second</option>
                                                                            <!-- Add more options as needed -->
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div style="display: flex" class="col-sm-4 center">
                                            <div style="height: 200px; width: 200px; margin-left: 70px;">
                                                <img id="watchImg" style="margin-left: auto; 
                                                margin-right: auto; height: 200px; width: 200px;"
                                                    src="../assets/images/profile/sample.png" />
                                            </div>
                                        </div>


                                        <div class="row" style="margin-top: 2%;">
                                            <div class="col-sm-6">
                                                <h5>Combination Title</h5>
                                                <textarea class="form-control" id="combination"
                                                    style="max-height: 60px;" placeholder="Enter the Combination Title"
                                                    maxlength="40"></textarea>
                                            </div>

                                            <div class="col-sm-6">
                                                <h5>Combination Description</h5>
                                                <textarea class="form-control" id="comdescrip" style="min-height: 60px;"
                                                    placeholder="Enter the Combination Description"></textarea>
                                            </div>

                                            <div class="customizations">
                                                <div class="customization-header" onclick="toggleCustomizations(this)">
                                                    <h5><span>Watch Specifications</span></h5>
                                                    <span class="expand-btn">+</span>
                                                </div>

                                                <div class="customizations-content hidden">
                                                    <div class="col-sm-4">
                                                        <h5>Dial Size</h5>
                                                        <input class="form-control" id="dialsize"
                                                            placeholder="Enter the Dial Size in MM" />
                                                    </div>
                                                    <div class="col-sm-4">
                                                        <h5>Colour</h5>
                                                        <input class="form-control" id="color"
                                                            placeholder="Enter the Watch Colour" />
                                                    </div>

                                                    <div class="col-sm-4">
                                                        <h5>Weight In Grams</h5>
                                                        <input class="form-control" id="weight"
                                                            placeholder="Enter Weight In Grams" />
                                                    </div>


                                                    <div class="col-sm-4">
                                                        <h5>Body Type</h5>
                                                        <input class="form-control" id="bodytype"
                                                            placeholder="Enter the Body Type" />

                                                    </div>
                                                    <div class="col-sm-4">
                                                        <h5>Brand</h5>
                                                        <input class="form-control" id="Brand"
                                                            placeholder="Enter the Watch Brand" />
                                                    </div>

                                                    <div class="col-sm-4">
                                                        <h5>Batteries Included</h5>
                                                        <div class="custom-select">
                                                            <select class="form-control" id="battery">
                                                                <option value="0">Select</option>
                                                                <option value="1">Yes</option>
                                                                <option value="2">No</option>
                                                            </select>
                                                        </div>
                                                    </div>


                                                    <div class="col-sm-4">
                                                        <h5>Year Of Manufacture</h5>
                                                        <input class="form-control" id="year"
                                                            placeholder="Enter the Manufactured Year" />

                                                    </div>
                                                    <div class="col-sm-4">
                                                        <h5>Warranty Period In Months</h5>
                                                        <input class="form-control" id="warranty"
                                                            placeholder="Enter the Warranty Period in Months" />
                                                    </div>

                                                    <div class="col-sm-4">
                                                        <h5>Item Code</h5>
                                                        <input class="form-control" id="itemcode"
                                                            placeholder="Enter the Item Code" />
                                                    </div>


                                                    <div class="col-sm-4">
                                                        <h5>Display Type</h5>
                                                        <div class="custom-select">
                                                            <select class="form-control" id="displaytype">
                                                                <option value="0">Select</option>
                                                                <option value="1">Analog</option>
                                                                <option value="2">Digital</option>
                                                            </select>
                                                        </div>
                                                    </div>

                                                    <div class="col-sm-4">
                                                        <h5>Water Resistant</h5>
                                                        <div class="custom-select">
                                                            <select class="form-control" id="water">
                                                                <option value="0">Select</option>
                                                                <option value="1">Yes</option>
                                                                <option value="2">No</option>
                                                            </select>
                                                        </div>
                                                    </div>

                                                    <div class="col-sm-4">
                                                        <h5>Shape</h5>
                                                        <input class="form-control" id="shape"
                                                            placeholder="Enter Your Watch Shape" />
                                                    </div>


                                                    <div class="col-sm-4">
                                                        <h5>Inside the Box</h5>
                                                        <input class="form-control" id="insidebox"
                                                            placeholder="Enter what's Inside the Box" />
                                                    </div>

                                                    <div class="col-sm-4">
                                                        <h5>IP Rating</h5>
                                                        <input class="form-control" id="iprating"
                                                            placeholder="Enter IP Rating" />
                                                    </div>

                                                    <div class="col-sm-4">
                                                        <h5>Delivery Fee</h5>
                                                        <input class="form-control" id="deliveryfee"
                                                            placeholder="Enter Delivery Fee" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                        <!--Image Upload Field Here-->

                                        <div class="row" style="padding: 30px; margin-top: 20px">
                                            <div class="col-sm-2 imgUp">
                                                <div class="imagePreview" id="image_back1" style="border-radius: 5px;">
                                                    <img src="../assets/images/profile/sample.png" id="front1"
                                                        alt="Default Image" style="width:160px; height: 160px;"
                                                        onclick="document.getElementById('watchfile2').click();">
                                                    </button>
                                                </div>
                                                <label style="width: 100%; text-align: center;">
                                                    Upload<input type="file" class="uploadFile img" value="Upload Photo"
                                                        onchange="handleFileUpload(this, 'front1')" id="watchfile2"
                                                        style="width: 0px; height: 0px; overflow: hidden;">
                                                </label>
                                                <span id="watchfile2_error" style="color: red;" class="error"></span>
                                            </div>
                                            <!-- col-2 -->
                                            <!-- <i class="fa fa-plus imgAdd"></i> -->
                                            <div class="col-sm-2 imgUp">
                                                <div class="imagePreview" style="border-radius: 5px;">
                                                    <img src="../assets/images/profile/sample.png" id="back1"
                                                        alt="Default Image" style="width:160px; height: 160px;"
                                                        onclick="document.getElementById('watchfile3').click();">
                                                </div>
                                                <label style="width: 100%; text-align: center;">
                                                    Upload<input type="file" class="uploadFile img" value="Upload Photo"
                                                        onchange="handleFileUpload(this, 'back1')" id="watchfile3"
                                                        style="width: 0px; height: 0px; overflow: hidden;">
                                                </label>
                                                <span id="watchfile3_error" style="color: red;" class="error"></span>
                                            </div>
                                            <!-- col-2 -->
                                            <!-- <i class="fa fa-plus imgAdd"></i> -->
                                            <div class="col-sm-2 imgUp">
                                                <div class="imagePreview" style="border-radius: 5px;">
                                                    <img src="../assets/images/profile/sample.png" alt="Default Image"
                                                        id="down1" style="width:160px; height: 160px;"
                                                        onclick="document.getElementById('watchfile4').click();">
                                                </div>
                                                <label style="width: 100%; text-align: center;">
                                                    Upload<input type="file" class="uploadFile img" value="Upload Photo"
                                                        onchange="handleFileUpload(this, 'down1')" id="watchfile4"
                                                        style="width: 0px; height: 0px; overflow: hidden;">
                                                </label>
                                                <span id="watchfile4_error" style="color: red;" class="error"></span>
                                            </div>
                                            <!-- col-2 -->
                                            <!-- <i class="fa fa-plus imgAdd"></i> -->
                                            <div class="col-sm-2 imgUp">
                                                <div class="imagePreview" style="border-radius: 5px;">
                                                    <img src="../assets/images/profile/sample.png" alt="Default Image"
                                                        id="up1" style="width:160px; height: 160px;"
                                                        onclick="document.getElementById('watchfile5').click();">

                                                </div>
                                                <label style="width: 100%; text-align: center;">
                                                    Upload<input type="file" class="uploadFile img" value="Upload Photo"
                                                        onchange="handleFileUpload(this, 'up1')" id="watchfile5"
                                                        style="width: 0px; height: 0px; overflow: hidden;">
                                                </label>
                                                <span id="watchfile5_error" style="color: red;" class="error"></span>
                                            </div>
                                            <!-- col-2 -->
                                            <!-- <i class="fa fa-plus imgAdd"></i> -->
                                            <div class="col-sm-2 imgUp">
                                                <div class="imagePreview" style="border-radius: 5px;">
                                                    <img src="../assets/images/profile/sample.png" alt="Default Image"
                                                        id="left1" style="width:160px; height: 160px;"
                                                        onclick="document.getElementById('watchfile6').click();">

                                                </div>
                                                <label style="width: 100%; text-align: center;">
                                                    Upload<input type="file" class="uploadFile img" value="Upload Photo"
                                                        onchange="handleFileUpload(this, 'left1')" id="watchfile6"
                                                        style="width: 0px; height: 0px; overflow: hidden;">
                                                </label>
                                                <span id="watchfile6_error" style="color: red;" class="error"></span>
                                            </div>
                                            <div class="col-sm-2 imgUp">
                                                <div class="imagePreview" style="border-radius: 5px;">
                                                    <img src="../assets/images/profile/sample.png" alt="Default Image"
                                                        id="right1" style="width:160px; height: 160px;"
                                                        onclick="document.getElementById('watchfile1').click();">

                                                </div>
                                                <label style="width: 100%; text-align: center;">
                                                    Upload<input type="file" class="uploadFile img" value="Upload Photo"
                                                        onchange="handleFileUpload(this, 'right1')" id="watchfile1"
                                                        style="width: 0px; height: 0px; overflow: hidden;">
                                                </label>
                                                <span id="watchfile1_error" style="color: red;" class="error"></span>
                                            </div>
                                        </div>


                                        <!--Submit Button Here-->

                                        <div style="display: flex;">
                                            <button type="button" class="btn btn-primary"
                                                style="margin-top: 20px; margin-left: 450px;"
                                                onclick="window.location.href ='./edit-watch.html'">
                                                Cancel
                                            </button>
                                            <button type="button" class="btn btn-primary"
                                                style="margin-top: 20px; margin-left: 10px;" onclick="validateForm()">
                                                Save
                                            </button>
                                        </div>
                                </form>
                            </div>
                        </div>

                        <script src="../assets/libs/jquery/dist/jquery.min.js"></script>
                        <script src="../assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
                        <script src="../assets/js/sidebarmenu.js"></script>
                        <script src="../assets/js/app.min.js"></script>
                        <script src="../assets/libs/simplebar/dist/simplebar.js"></script>


                        <script>
                            function handleFileUpload(input, imageId) {
                                var file = input.files[0];
                                var image = document.getElementById(imageId);
                                var errorSpan = document.getElementById(imageId + '_error');

                                if (file) {
                                    if (file.type.match('image.*')) {
                                        var reader = new FileReader();
                                        reader.onload = function (e) {
                                            image.src = e.target.result;

                                        };
                                        reader.readAsDataURL(file);
                                    } else {
                                        image.src = '';
                                        errorSpan.textContent = 'Please upload an image file.';
                                        input.value = '';
                                    }
                                } else {
                                    image.src = '';
                                    errorSpan.textContent = 'No file selected.';
                                }
                            }
                        </script>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let addlChrgs;
        let dialDetails = []
        let bezelDetails = []
        let casebackDetails = []
        let strapDetails = []
        let chronocaseDetails = []
        let crownDetails = []
        let handDetails = []
        let movementDetails = []
        let secondDetails = []


        // const getDropDown = () => {
        //     const Dial_dropdown = document.getElementById('dial_dropdown');
        //     const Strap_dropdown = document.getElementById('strap_dropdown');
        //     const Bezel_dropdown = document.getElementById('bezel_dropdown');
        //     const Caseback_dropdown = document.getElementById('caseback_dropdown');
        //     const Chronocase_dropdown = document.getElementById('chronocase_dropdown');
        //     const Crown_dropdown = document.getElementById('crown_dropdown');
        //     const Hand_dropdown = document.getElementById('hand_dropdown');
        //     const Movement_dropdown = document.getElementById('movement_dropdown');
        //     const Second_dropdown = document.getElementById('second_dropdown');


        //     const apiUrl = '../api//watch-parts-lookup.php';
        //     const body = JSON.stringify({
        //         "wid": window.localStorage.getItem("wid"),
        //         "token": window.localStorage.getItem("authToken")
        //     })
        //     fetch(apiUrl, {
        //         method: "POST",
        //         body: body,
        //         headers: {
        //             "Content-Type": "application/json"
        //         }
        //     })
        //         .then(res => res.json())
        //         .then(data => {
        //             let dialDetails = []
        //             let bezelDetails = []
        //             let casebackDetails = []
        //             let strapDetails = []
        //             let chronocaseDetails = []
        //             let crownDetails = []
        //             let handDetails = []
        //             let movementDetails = []
        //             let secondDetails = []

        //             if (data.success) {
        //                 data.data.dial.forEach(al => {
        //                     dialDetails.push({ value: al.did, text: al.name, price: al.price })
        //                 });
        //                 dialDetails.forEach(item => {
        //                     const dial_option = document.createElement('option');
        //                     dial_option.value = item.value;
        //                     dial_option.textContent = item.text;
        //                     Dial_dropdown.appendChild(dial_option);
        //                 })
        //                 data.data.bezel.forEach(al => {
        //                     bezelDetails.push({ value: al.bid, text: al.name, price: al.price })
        //                 });
        //                 bezelDetails.forEach(item => {
        //                     const dial_option = document.createElement('option');
        //                     dial_option.value = item.value;
        //                     dial_option.textContent = item.text;
        //                     Bezel_dropdown.appendChild(dial_option);
        //                 })
        //                 data.data.caseback.forEach(al => {
        //                     casebackDetails.push({ value: al.cid, text: al.name, price: al.price })
        //                 });
        //                 casebackDetails.forEach(item => {
        //                     const dial_option = document.createElement('option');
        //                     dial_option.value = item.value;
        //                     dial_option.textContent = item.text;
        //                     Caseback_dropdown.appendChild(dial_option);
        //                 })

        //                 //Strap Here

        //                 data.data.strap.forEach(al => {
        //                     strapDetails.push({ value: al.sid, text: al.name, price: al.price })
        //                 });
        //                 strapDetails.forEach(item => {
        //                     const dial_option = document.createElement('option');
        //                     dial_option.value = item.value;
        //                     dial_option.textContent = item.text;
        //                     Strap_dropdown.appendChild(dial_option);
        //                 })
        //                 data.data.chronocase.forEach(al => {
        //                     chronocaseDetails.push({ value: al.cid, text: al.name, price: al.price })
        //                 });
        //                 chronocaseDetails.forEach(item => {
        //                     const dial_option = document.createElement('option');
        //                     dial_option.value = item.value;
        //                     dial_option.textContent = item.text;
        //                     Chronocase_dropdown.appendChild(dial_option);
        //                 })
        //                 data.data.crowns.forEach(al => {
        //                     crownDetails.push({ value: al.cid, text: al.name, price: al.price })
        //                 });
        //                 crownDetails.forEach(item => {
        //                     const dial_option = document.createElement('option');
        //                     dial_option.value = item.value;
        //                     dial_option.textContent = item.text;
        //                     Crown_dropdown.appendChild(dial_option);
        //                 })
        //                 data.data.hands.forEach(al => {
        //                     handDetails.push({ value: al.hid, text: al.name, price: al.price })
        //                 });
        //                 handDetails.forEach(item => {
        //                     const dial_option = document.createElement('option');
        //                     dial_option.value = item.value;
        //                     dial_option.textContent = item.text;
        //                     Hand_dropdown.appendChild(dial_option);
        //                 })
        //                 data.data.movement.forEach(al => {
        //                     movementDetails.push({ value: al.mid, text: al.name, price: al.price })
        //                 });
        //                 movementDetails.forEach(item => {
        //                     const dial_option = document.createElement('option');
        //                     dial_option.value = item.value;
        //                     dial_option.textContent = item.text;
        //                     Movement_dropdown.appendChild(dial_option);
        //                 })
        //                 data.data.seconds.forEach(al => {
        //                     secondDetails.push({ value: al.sid, text: al.name, price: al.price })
        //                 });
        //                 secondDetails.forEach(item => {
        //                     const dial_option = document.createElement('option');
        //                     dial_option.value = item.value;
        //                     dial_option.textContent = item.text;
        //                     Second_dropdown.appendChild(dial_option);
        //                 })
        //             }
        //             else {
        //                 alert(data.msg)
        //             }
        //         })
        //         .catch(err => {
        //             console.log(err);
        //         })
        // }
        // getDropDown();

        const getWatchData = () => {
            const Dial_dropdown = document.getElementById('dial_dropdown');
            const Strap_dropdown = document.getElementById('strap_dropdown');
            const Bezel_dropdown = document.getElementById('bezel_dropdown');
            const Caseback_dropdown = document.getElementById('caseback_dropdown');
            const Chronocase_dropdown = document.getElementById('chronocase_dropdown');
            const Crown_dropdown = document.getElementById('crown_dropdown');
            const Hand_dropdown = document.getElementById('hand_dropdown');
            const Movement_dropdown = document.getElementById('movement_dropdown');
            const Second_dropdown = document.getElementById('second_dropdown');


            const apiUrl = '../api//get-indi-watch.php';
            const body = JSON.stringify({
                "wid": window.localStorage.getItem("wid"),
                "token": window.localStorage.getItem("authToken")
            })
            fetch(apiUrl, {
                method: "POST",
                body: body,
                headers: {
                    "Content-Type": "application/json"
                }
            })
                .then(res => res.json())
                .then(data => {

                    if (data.success) {
                        document.getElementById("watchImg").src = data.data[0].image_front
                        document.getElementById("watchname").value = data.data[0].name
                        document.getElementById("watchmodel").value = data.data[0].model
                        document.getElementById("watchprice").value = parseFloat(data.data[0].base_price).toFixed(2)
                        document.getElementById("servicePercentage").value = parseInt(data.data[0].aaditional_charges)
                        document.getElementById("dialsize").value = data.data[0].dial_size
                        document.getElementById("color").value = data.data[0].color
                        document.getElementById("weight").value = data.data[0].weight
                        document.getElementById("bodytype").value = data.data[0].body_type
                        document.getElementById("Brand").value = data.data[0].brand
                        document.getElementById("battery").value = data.data[0].batteries_included
                        document.getElementById("year").value = data.data[0].year_of_manufacture
                        document.getElementById("warranty").value = data.data[0].warranty_period
                        document.getElementById("itemcode").value = data.data[0].item_code
                        document.getElementById("displaytype").value = data.data[0].display_type
                        document.getElementById("water").value = data.data[0].water_resistant
                        document.getElementById("shape").value = data.data[0].shape
                        document.getElementById("insidebox").value = data.data[0].inside_the_box
                        document.getElementById("iprating").value = data.data[0].ip_rating
                        document.getElementById("deliveryfee").value = data.data[0].delivery_fee

                        addlChrgs = data.data[0].aaditional_charges

                        data.data[0].combination.dials.forEach(al => {
                            dialDetails.push({ value: al.id, text: al.name, price: parseFloat(al.price.replace('$', ''))})
                        });
                        dialDetails.forEach(item => {
                            const dial_option = document.createElement('option');
                            dial_option.value = item.value;
                            dial_option.textContent = item.text;
                            Dial_dropdown.appendChild(dial_option);
                        })
                        data.data[0].combination.bezel.forEach(al => {
                            bezelDetails.push({ value: al.id, text: al.name, price: parseFloat(al.price.replace('$', ''))})
                        });
                        bezelDetails.forEach(item => {
                            const dial_option = document.createElement('option');
                            dial_option.value = item.value;
                            dial_option.textContent = item.text;
                            Bezel_dropdown.appendChild(dial_option);
                        })
                        data.data[0].combination.caseback.forEach(al => {
                            casebackDetails.push({ value: al.id, text: al.name, price: parseFloat(al.price.replace('$', ''))})
                        });
                        casebackDetails.forEach(item => {
                            const dial_option = document.createElement('option');
                            dial_option.value = item.value;
                            dial_option.textContent = item.text;
                            Caseback_dropdown.appendChild(dial_option);
                        })

                        //Strap Here

                        data.data[0].combination.strap.forEach(al => {
                            strapDetails.push({ value: al.id, text: al.name, price: parseFloat(al.price.replace('$', ''))})
                        });
                        strapDetails.forEach(item => {
                            const dial_option = document.createElement('option');
                            dial_option.value = item.value;
                            dial_option.textContent = item.text;
                            Strap_dropdown.appendChild(dial_option);
                        })
                        data.data[0].combination.chronocase.forEach(al => {
                            chronocaseDetails.push({ value: al.id, text: al.name, price: parseFloat(al.price.replace('$', ''))})
                        });
                        chronocaseDetails.forEach(item => {
                            const dial_option = document.createElement('option');
                            dial_option.value = item.value;
                            dial_option.textContent = item.text;
                            Chronocase_dropdown.appendChild(dial_option);
                        })
                        data.data[0].combination.crown.forEach(al => {
                            crownDetails.push({ value: al.id, text: al.name, price: parseFloat(al.price.replace('$', ''))})
                        });
                        crownDetails.forEach(item => {
                            const dial_option = document.createElement('option');
                            dial_option.value = item.value;
                            dial_option.textContent = item.text;
                            Crown_dropdown.appendChild(dial_option);
                        })
                        data.data[0].combination.hand.forEach(al => {
                            handDetails.push({ value: al.id, text: al.name, price: parseFloat(al.price.replace('$', ''))})
                        });
                        handDetails.forEach(item => {
                            const dial_option = document.createElement('option');
                            dial_option.value = item.value;
                            dial_option.textContent = item.text;
                            Hand_dropdown.appendChild(dial_option);
                        })
                        data.data[0].combination.movement.forEach(al => {
                            movementDetails.push({ value: al.id, text: al.name, price: parseFloat(al.price.replace('$', ''))})
                        });
                        movementDetails.forEach(item => {
                            const dial_option = document.createElement('option');
                            dial_option.value = item.value;
                            dial_option.textContent = item.text;
                            Movement_dropdown.appendChild(dial_option);
                        })
                        data.data[0].combination.second.forEach(al => {
                            secondDetails.push({ value: al.id, text: al.name, price: parseFloat(al.price.replace('$', ''))})
                        });
                        secondDetails.forEach(item => {
                            const dial_option = document.createElement('option');
                            dial_option.value = item.value;
                            dial_option.textContent = item.text;
                            Second_dropdown.appendChild(dial_option);
                        })


                    }
                    else {
                        alert(data.msg)
                    }
                })
                .catch(err => {
                    console.log(err);
                })
        }
        getWatchData();

        function validateForm() {
            let combinationTitle = document.getElementById("combination").value;
            let combinationDescription = document.getElementById("comdescrip").value;
            let dialDropdown = document.getElementById("dial_dropdown").value;
            let strapDropdown = document.getElementById("strap_dropdown").value;
            let bezelDropdown = document.getElementById("bezel_dropdown").value;
            let casebackDropdown = document.getElementById("caseback_dropdown").value;
            let chronocaseDropdown = document.getElementById("chronocase_dropdown").value;
            let crownDropdown = document.getElementById("crown_dropdown").value;
            let handDropdown = document.getElementById("hand_dropdown").value;
            let movementDropdown = document.getElementById("movement_dropdown").value;
            let secondDropdown = document.getElementById("second_dropdown").value;




            // Check if combination title and description are empty
            if (combinationTitle.trim() === "" || combinationDescription.trim() === "") {
                alert("Please fill in Combination Title and Combination Description");
                return false;
            }

            //Check min one dropdown has to be selected
            if (dialDropdown === '0' && strapDropdown === '0' && bezelDropdown === '0' && casebackDropdown === '0' && chronocaseDropdown === '0' && crownDropdown === '0'
                && handDropdown === '0' && movementDropdown === '0' && secondDropdown === '0') {
                alert('Please select minimum one dropdown');
                return false;
            }

            // Validate image file inputs
            let imageInputs = document.querySelectorAll(".uploadFile");
            for (var i = 0; i < imageInputs.length; i++) {
                var file = imageInputs[i].files[0];
                if (!file) {
                    alert("Please upload all images in upload field");
                    return false;
                }
                // Add additional validations if needed, such as file type or size
            }


            // let priceMultiplier = 0;
            // if (parseInt(dialDropdown) != 0)
            //     priceMultiplier += 1
            // if (parseInt(strapDropdown) != 0)
            //     priceMultiplier += 1
            // if (parseInt(chronocaseDropdown) != 0)
            //     priceMultiplier += 1
            // if (parseInt(movementDropdown) != 0)
            //     priceMultiplier += 1
            // if (parseInt(bezelDropdown) != 0)
            //     priceMultiplier += 1
            // if (parseInt(handDropdown) != 0)
            //     priceMultiplier += 1
            // if (parseInt(secondDropdown) != 0)
            //     priceMultiplier += 1
            // if (parseInt(crownDropdown) != 0)
            //     priceMultiplier += 1
            // if (parseInt(casebackDropdown) != 0)
            //     priceMultiplier += 1

            // let percentage = parseFloat(addlChrgs) / parseFloat(100)
            // let total = parseFloat(priceMultiplier) * percentage * parseFloat(document.getElementById("watchprice").value)
            // let grandTotal = parseFloat(total) + parseFloat(document.getElementById("watchprice").value)

            // //api call for adding watch face
            // let url = "../api/add-watch-face.php"
            // let formData = new FormData()
            // formData.append("dial_id", dialDropdown)
            // formData.append("strap_id", strapDropdown)
            // formData.append("chronocase_id", chronocaseDropdown)
            // formData.append("movement_id", movementDropdown)
            // formData.append("bezel_id", bezelDropdown)
            // formData.append("hands_id", handDropdown)
            // formData.append("seconds_id", secondDropdown)
            // formData.append("crown_id", crownDropdown)
            // formData.append("caseback_id", casebackDropdown)
            // formData.append("wid", window.localStorage.getItem("wid"))
            // formData.append("watch_face_name", combinationTitle.trim())
            // formData.append("price", grandTotal)
            // formData.append("description", combinationDescription.trim())
            // formData.append("token", window.localStorage.getItem("authToken"))
            // formData.append("image_front", document.getElementById("watchfile2").files[0])
            // formData.append("image_back", document.getElementById("watchfile3").files[0])
            // formData.append("image_up", document.getElementById("watchfile4").files[0])
            // formData.append("image_down", document.getElementById("watchfile5").files[0])
            // formData.append("image_left", document.getElementById("watchfile6").files[0])
            // formData.append("image_right", document.getElementById("watchfile1").files[0])
            // formData.append("user_id", 1)

            // fetch(url, {
            //     body: formData,
            //     method: "POST"
            // })
            //     .then(res => res.json())
            //     .then(data => {
            //         if (data.success) {
            //             updateWatchDetails()
            //             // alert(data.msg)
            //         }
            //     })
            //     .catch(err => {
            //         console.log(err);
            //     })
            updateWatchDetails()

        }

        function updateWatchDetails() {
            const watchName = document.getElementById('watchname').value.trim();
            const watchPrice = parseFloat(document.getElementById('watchprice').value.trim());
            const watchModel = document.getElementById('watchmodel').value.trim();
            const watchPercentage = parseFloat(document.getElementById("servicePercentage").value.trim());

            let combinationTitle = document.getElementById("combination").value;
            let combinationDescription = document.getElementById("comdescrip").value;
            let dialDropdown = document.getElementById("dial_dropdown").value;
            let strapDropdown = document.getElementById("strap_dropdown").value;
            let bezelDropdown = document.getElementById("bezel_dropdown").value;
            let casebackDropdown = document.getElementById("caseback_dropdown").value;
            let chronocaseDropdown = document.getElementById("chronocase_dropdown").value;
            let crownDropdown = document.getElementById("crown_dropdown").value;
            let handDropdown = document.getElementById("hand_dropdown").value;
            let movementDropdown = document.getElementById("movement_dropdown").value;
            let secondDropdown = document.getElementById("second_dropdown").value;

            // let pricePercentage = 0;
            let totalCost = 0;
            totalCost += watchPrice;


            if (dialDropdown != "0") {
                let newArray = dialDetails.filter(function (el) {
                    return el.value == dialDropdown;
                });
                
                totalCost += newArray[0].price
            }

            if (strapDropdown != "0") {
                let newArray = strapDetails.filter(function (el) {
                    return el.value == strapDropdown;
                });
                
                totalCost += newArray[0].price
            }

            if (bezelDropdown != "0") {
                let newArray = bezelDetails.filter(function (el) {
                    return el.value == bezelDropdown;
                });
                
                totalCost += newArray[0].price
            }

            if (casebackDropdown != "0") {
                let newArray = casebackDetails.filter(function (el) {
                    return el.value == casebackDropdown;
                });
                
                totalCost += newArray[0].price
            }

            if (chronocaseDropdown != "0") {
                let newArray = chronocaseDetails.filter(function (el) {
                    return el.value == chronocaseDropdown;
                });
                
                totalCost += newArray[0].price
            }

            if (crownDropdown != "0") {
                let newArray = crownDetails.filter(function (el) {
                    return el.value == crownDropdown;
                });
                
                totalCost += newArray[0].price
            }

            if (handDropdown != "0") {
                let newArray = handDetails.filter(function (el) {
                    return el.value == handDropdown;
                });
                
                totalCost += newArray[0].price
            }

            if (movementDropdown != "0") {
                let newArray = movementDetails.filter(function (el) {
                    return el.value == movementDropdown;
                });
                
                totalCost += newArray[0].price
            }

            if (secondDropdown != "0") {
                let newArray = secondDetails.filter(function (el) {
                    return el.value == secondDropdown;
                });
                
                totalCost += newArray[0].price
            }

            // if (dialDropdown != "0")
            //     pricePercentage += 1;
            // if (strapDropdown != "0")
            //     pricePercentage += 1;
            // if (bezelDropdown != "0")
            //     pricePercentage += 1;
            // if (casebackDropdown != "0")
            //     pricePercentage += 1;
            // if (chronocaseDropdown != "0")
            //     pricePercentage += 1;
            // if (crownDropdown != "0")
            //     pricePercentage += 1;
            // if (handDropdown != "0")
            //     pricePercentage += 1;
            // if (movementDropdown != "0")
            //     pricePercentage += 1;
            // if (secondDropdown != "0")
            //     pricePercentage += 1;

            const dialsize = document.getElementById('dialsize').value.trim();
            const color = document.getElementById('color').value.trim();
            const weight = document.getElementById('weight').value.trim();
            const bodytype = document.getElementById('bodytype').value.trim();
            const Brand = document.getElementById('Brand').value.trim();
            const battery = document.getElementById('battery').value.trim();
            const yearofmanufacture = document.getElementById('year').value.trim();
            const warranty = document.getElementById('warranty').value.trim();
            const itemcode = document.getElementById('itemcode').value.trim();
            const displaytype = document.getElementById('displaytype').value.trim();
            const waterresistant = document.getElementById('water').value;
            const shape = document.getElementById('shape').value.trim();
            const iprating = document.getElementById('iprating').value.trim();
            const deliveryfee = document.getElementById('deliveryfee').value.trim();
            const insidebox = document.getElementById('insidebox').value.trim();

            const url = '../api/add-watch-face.php';
            const body = new FormData();
            body.append("dial_id", dialDropdown)
            body.append("strap_id", strapDropdown)
            body.append("chronocase_id", chronocaseDropdown)
            body.append("movement_id", movementDropdown)
            body.append("bezel_id", bezelDropdown)
            body.append("hands_id", handDropdown)
            body.append("seconds_id", secondDropdown)
            body.append("crown_id", crownDropdown)
            body.append("caseback_id", casebackDropdown)
            body.append("wid", window.localStorage.getItem("wid"))
            body.append("price", (totalCost + (totalCost * (watchPercentage / 100))).toFixed(2));
            body.append("description", combinationDescription.trim())
            body.append("watch_face_name", combinationTitle.trim())
            body.append("token", window.localStorage.getItem("authToken"))
            body.append("image_front", document.getElementById("watchfile2").files[0])
            body.append("image_back", document.getElementById("watchfile3").files[0])
            body.append("image_up", document.getElementById("watchfile4").files[0])
            body.append("image_down", document.getElementById("watchfile5").files[0])
            body.append("image_left", document.getElementById("watchfile6").files[0])
            body.append("image_right", document.getElementById("watchfile1").files[0])
            body.append("user_id", "0")
            body.append("dialSize", dialsize)
            body.append("color", color)
            body.append("weight", weight)
            body.append("bodyType", bodytype)
            body.append("brand", Brand)
            body.append("batteriesIncluded", battery)
            body.append("yearOfManufacture", yearofmanufacture)
            body.append("warrantyPeriod", warranty)
            body.append("itemCode", itemcode)
            body.append("displayType", displaytype)
            body.append("waterResistant", waterresistant)
            body.append("ipRating", iprating)
            body.append("shape", shape)
            body.append("insideTheBox", insidebox)
            body.append("deliveryFee", deliveryfee)


            fetch(url, {
                method: "POST",
                body: body,
            },
            ).then(response => {
                return response.json();
            }).then(data => {
                if (data.success) {
                    alert(data.msg);
                    window.location.href = "./view-watch.html"
                }
                else {
                    alert(data.msg);
                }
            }).catch(err => {
                console.log('err')
                alert("error")
            });
        }


    </script>

    <script>
        function toggleCustomizations(header) {
            var content = header.nextElementSibling;
            var expandBtn = header.querySelector('.expand-btn');

            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                expandBtn.textContent = '-';
                content.style.maxHeight = content.scrollHeight + 'px'; // Expand smoothly
            } else {
                content.classList.add('hidden');
                expandBtn.textContent = '+';
                content.style.maxHeight = null; // Collapse smoothly
            }
        }

    </script>
</body>

</html>